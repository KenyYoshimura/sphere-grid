# WONDERFUL GROWTH 企業スフィア盤 仕様書 v1.0

## 1. 目的

FF10の「スフィア盤」風の進行・解放ロジックを、WONDERFUL GROWTH（以下WG）の企業成長に適用し、以下を実現する。

* 売上や運用条件の達成に応じて「解放可能な施策（スキル/投資/採用）」を段階的に可視化する
* 「今やって良い/まだ早い」を感覚ではなくルールで判断できる状態にする
* 状態（LOCKED/ELIGIBLE/UNLOCKED/MASTERED）を更新し続けられる運用基盤をつくる
* FF10風の雰囲気と視覚設計で、社内外で共有しても"資料として耐える"品質にする

---

## 2. v1.0 新機能（FF10風再設計）

### 2.1 ノードの視覚ヒエラルキー

| 重要度 | サイズ | 用途 |
|-------|-------|------|
| MAJOR | 110px | 主要マイルストーン（新規事業、認証取得など） |
| STANDARD | 92px | 通常の進捗ノード |
| MINOR | 70px | 補助的なノード |

### 2.2 ノード形状バリエーション

| 形状 | 意味 | 対象ノード例 |
|-----|------|------------|
| CIRCLE | 人材関連 | HIRE_3, WELFARE, HIRE_MORE |
| HEXAGON | プロセス・制度 | PRODUCTIZE, SALES_PROCESS |
| DIAMOND | 品質・セキュリティ | SEC_PREP, SEC_GET, OFFICE_15 |
| OCTAGON | CORE・新規事業 | CORE, NEW_BIZ |

### 2.3 ドメイン分類（FF10のキャラクター領域に相当）

| ドメイン | 色 | 領域 |
|---------|-----|------|
| PEOPLE | Blue (#3399E6) | 採用・人材 |
| INFRA | Orange (#E68033) | 設備・インフラ |
| PROCESS | Purple (#9966CC) | 制度・プロセス |
| QUALITY | Green (#4DCC80) | 品質・セキュリティ |
| BUSINESS | Red (#E64D66) | 新規事業 |
| CORE | Gold (#FFD700) | 中央核 |

### 2.4 パス（接続線）タイプ

| タイプ | 線幅 | 用途 |
|-------|-----|------|
| MAIN | 4px | メイン依存パス（太線） |
| OPTIONAL | 2px | 代替・オプションパス（細線） |
| BLOCKED | 2px点線 | ロック越えパス |
| CROSS_DOMAIN | 2.5px | ドメイン間接続 |

### 2.5 背景強化（FF10宇宙空間モチーフ）

* **星空背景**: 3層構成（小・中・大の星）、中心を避けて配置
* **ビネット効果**: 中心が明るく、外周が暗くなる
* **中心グロー**: 大きな発光楕円でCORE領域を強調

---

## 3. 前提ルール（ゲート条件）

現時点の「基盤ゲート（COREの前提）」は以下。

* 現預金：固定費 **4ヶ月分以上**
* 採用解放の前提：**見込み0、実績のみ**（ただし「入金前でも契約締結済みBacklog」は許容）
* 粗利率：**40%**
* 稼働率：**100%**
* オフィス賃料の上限：**粗利の15%以下**（基本上限ルール）

---

## 4. スコープ

### 4.1 対象（現行）

* Figma上で「企業スフィア盤」ビジュアルを自動生成する **Run once プラグイン**
* 盤面構成（リング、ノード、接続線、凡例、ドメインセクター）の生成
* ノード状態（LOCKED/ELIGIBLE/UNLOCKED/MASTERED）の表現
* ノード形状・サイズ・ドメインによる視覚的分類
* パスタイプ（MAIN/OPTIONAL/BLOCKED/CROSS_DOMAIN）による接続線の差別化
* FF10風の背景効果（星空、ビネット、中心グロー）
* コード内設定（CONFIG）を編集して更新運用できること

### 4.2 対象外（現時点）

* ノードのクリックで状態変更するUI（インタラクティブ編集）
* Notion/スプレッドシート等との自動同期
* 複数盤面（年度別/事業別）の管理UI
* 権限管理・監査ログ

---

## 5. 使用ツール / 実行環境

* Figma（デザインファイル）
* Figma Plugin（Development Plugin / Run once）
* 実装ファイル：`code.ts` → `code.js` にコンパイル

---

## 6. 盤面仕様（生成物）

### 6.1 生成される主要オブジェクト

* Frame：`WG Sphere Grid`（1920×1080）
* Background：星空、中心グロー、ビネット効果
* DomainSectors：ドメイン別のアーク表示
* Rings：年商帯ごとの同心円（3,000万／6,000万／1億）
* Nodes：施策ノード（状態・形状・サイズ別の見た目）
* Connectors：ノード間の接続線（タイプ別スタイル）
* Legend：状態凡例 + パスタイプ凡例
* コンポーネント群：ノード部品（Component Set：`WG Node / Sphere`）

### 6.2 ノード状態（State）

| 状態 | 視覚表現 |
|-----|---------|
| LOCKED | グレー、ロックアイコン、発光なし |
| ELIGIBLE | ゴールド発光、明るいストローク |
| UNLOCKED | グリーン発光 |
| MASTERED | 強いゴールド白発光、太いストローク |

### 6.3 配置ルール

* リング上座標は `angleDeg` で決定（極座標）
* 各リング半径は `RINGS[].radius` で管理
* COREは中央固定
* ノードサイズは `importance` と `sizeMultiplier` で決定

---

## 7. CONFIG構造（抜粋）

```typescript
// ノード定義例
{
  id: "HIRE_3",
  label: "採用\n〜3名",
  ring: "R30",
  angleDeg: -45,
  state: "ELIGIBLE",
  domain: "PEOPLE",        // ドメイン分類
  importance: "STANDARD",  // サイズ階層
  shape: "CIRCLE",         // 形状
  description: "最初の採用",
}

// エッジ定義例
{
  from: "CORE",
  to: "HIRE_3",
  pathType: "MAIN",        // パスタイプ
  curveType: "STRAIGHT",   // 直線 or BEZIER
}
```

---

## 8. 更新運用の仕様

### 8.1 更新対象

* ノードの状態変更：`CONFIG.NODES[].state`
* ノードの文言：`CONFIG.NODES[].label`
* ノードのドメイン/重要度/形状：`CONFIG.NODES[].domain/importance/shape`
* ノード追加/削除：`CONFIG.NODES`
* 接続追加/削除/タイプ変更：`CONFIG.EDGES`
* リング追加/半径調整：`CONFIG.RINGS`
* 背景設定：`CONFIG.BACKGROUND`

### 8.2 更新手順

1. `code.ts` の `CONFIG` を編集
2. `npm run build` でコンパイル
3. Figma上でプラグインを再実行
4. 既存の `WG Sphere Grid` は削除され、新しい盤面が生成される

---

## 9. 今後のロードマップ

### Phase 1（完了）：FF10風再設計
* ノードの形状・サイズヒエラルキー
* ドメイン分類システム
* パスタイプによる接続線の差別化
* 背景強化（星空、ビネット、中心グロー）
* 凡例の強化（バイリンガル、パスタイプ説明）

### Phase 2（中期）：更新運用の省力化
* 外部データ（CSV/JSON）からノード定義を読み込む
* 「月次運用」前提の更新フロー定義

### Phase 3（長期）：プロダクト化レベル
* カスタムUI付きプラグイン化
* 複数盤面管理（年度・事業別）
* KPI入力→自動でELIGIBLE判定
* 変更履歴（ログ）・承認フロー

---

## 10. 受け入れ基準

* プラグイン実行で `WG Sphere Grid` が毎回生成される
* リング、ノード、接続線、凡例、ドメインセクターが揃って出る
* ノード状態・形状・サイズの見た目が一目で区別できる
* パスタイプ（太線/細線/点線）が区別できる
* 背景に星空とビネット効果が表示される
* `CONFIG` 変更 → 再実行で盤面が更新できる
* 1920×1080で"資料としてそのまま貼れる"レイアウトが崩れない
